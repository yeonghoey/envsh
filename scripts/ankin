#!/usr/bin/env python3

import re
import time

import pyperclip


HR = '-' * 80


def main():
    last = ''
    while True:
        current = pyperclip.paste()
        if current != last:
            replaced = replace(current)
            pyperclip.copy(replaced)
            print(HR)
            print(replaced)
            last = replaced
        time.sleep(.3)


def replace(orig):
    r = orig
    r = r.strip()
    r = r.replace('. ', '.\n')
    m = re.match(r'^\{\{c\d::([^}]+)\}\}', r)
    if m is None:
        return r
    else:
        return m.group(1)


if __name__ == '__main__':
    main()
